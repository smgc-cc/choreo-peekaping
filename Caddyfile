{
    storage file_system /tmp/caddy/data
    admin off
}

:8383 {
    handle /api/* {
        reverse_proxy localhost:8034
    }
    handle /socket.io/* {
        reverse_proxy localhost:8034
    }
    root * /app/web
    handle /env.js {
        root * /tmp/app
        header Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
        file_server
    }
    @static path *.js *.css *.mjs *.woff *.woff2 *.svg *.png *.jpg *.jpeg *.gif *.ico
    handle @static {
        header Cache-Control "public, max-age=31536000, immutable"
        file_server
    }
    handle {
        try_files {path} {path}/ /index.html
        file_server
    }
    log {
        output stdout
        format json
    }
}
